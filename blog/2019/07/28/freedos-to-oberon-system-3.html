<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>FreeDOS to Oberon System 3</title>

    <link rel="stylesheet" type="text/css"  href="/css/site.css" media="screen" />
    <link rel="stylesheet" type="text/css"  href="/css/tables.css" media="screen" />
    <link title="RSS feed for rsdoiel's blog" rel="alternate" type="application/rss+xml" href="http://rsdoiel.github.io/rss.xml" />
    <link rel="alternative" type="application/markdown" href="freedos-to-oberon-system-3.md">
  </head>
  <body>
    <nav>
    <ul>
<li><a href="/">R. S. Doiel</a></li>
<li><a href="/blog/">Blog</a></li>
<li><a href="/presentations.html">Presentations</a></li>
<li><a href="/library-terminology.html">Library Jargon</a></li>
<li><a href="/cv.html">CV</a></li>
<li><a href="/resume.html">Resume</a></li>
<li><a href="https://github.com/rsdoiel">GitHub</a></li>
</ul>

    </nav>

    <section>
      <article>
	  <h1 id="freedos-to-oberon-system-3">FreeDOS to Oberon System 3</h1>

<p>By R. S. Doiel, 2019-07-28
(updated: 2019-08-19)</p>

<p>What follows are notes on getting a FreeDOS 1.2<sup class="footnote-ref" id="fnref:1"><a href="#fn:1">1</a></sup> and
then Native Oberon<sup class="footnote-ref" id="fnref:2"><a href="#fn:2">2</a></sup> running under VirtualBox 6.0. You might
wonder why these two are together. While it was
easy to run the Native Oberon installation process that process
assumes you have a properly partitioned hard disc and VirtualBox
seems to skip that process. I found taking advantage of FreeDOS
simplified things for me.</p>

<p>My goal was running Oberon System 3, but setting up a Virtual Box
with FreeDOS 1.2 gave me a virtual machine that functions like a
1999 era PC. From there all the steps in the Oberon instructions
just worked.</p>

<h2 id="creating-freedos-1-2-virtual-box">Creating FreeDOS 1.2 Virtual Box</h2>

<p>I've been doing a bit if computer history reading and decided to
bring up some older systems as a means to understand where
things were.  The first computers I had access to were 8080, 8086
machines running MS DOS based. My first computer programming language
was Turbo Pascal. Feeling a bit nostalgic I thought it would be
interesting to use it again and see what I remembered from the days
of old. While PC and MS DOS no longer exist as commercial productions
an wonderful group of Open Source hackers have brought new life into
DOS with FreeDOS 1.2<sup class="footnote-ref" id="fnref:3"><a href="#fn:3">3</a></sup>. You'll find many of your old familiar commands
but also some nice improvements. You can even run it under VirtualBox
which is what I proceeded to do.</p>

<h3 id="virtualbox-6-0-setup">VirtualBox 6.0 setup</h3>

<p>The <a href="https://freedos.org">FreeDOS</a> website includes a CD ROM image
that you can use to install it. There are couple small hitches though
to get it working under VirtualBox. First go to the <a href="https://freedos.org/download">download</a> page and download the <a href="http://www.freedos.org/download/download/FD12CD.iso">CDROM &quot;standard&quot; installer&quot;</a>.</p>

<p>While that is downloading you can setup your VirtualBox machine.
First to remember is DOS compared to today's operating systems is
frugal in its hardware requirements. As a result I picked very modest
settings for my virtual machine.</p>

<ol>
<li>Launch VirtualBox</li>
<li>From the menu, pick Machine then pick new</li>
<li>Name your machine (e.g. &quot;FreeDOS 1.2&quot;), select the type: &quot;Other&quot; and Operating system of &quot;DOS&quot;</li>
<li>Set memory size as you like, I just accepted the default 32MB</li>
<li>Hard disc, pick &quot;Create a virtual hard disc now&quot;</li>
<li>Hard disc file type, pick &quot;VHD (Virtual Hard Disk)&quot;</li>
<li>Storage on physical hard disc, I picked Dynamically allocated both either is fine</li>
<li>File location and size, I accepted the default location and size</li>
<li>Before starting my FreeDOS box I made a couple of changes using &quot;settings&quot; menu icon
a. Display, I picked bumped memory up to 128M and picked VBoxSVGA with 33D acceleration (for games)
b. Storage, I added a second floppy drive (empty)
c. Network, I picked attached to NAT</li>
<li>When looking at my virtual machine's detail page I clicked on the Optical drive (empty), click &quot;choose disc image&quot; and pointed at the downloaded isntalled CD</li>
<li>Click Start.</li>
<li>At &quot;Welcome to FreeDOS 1.2&quot; blue screen, hit TAB key</li>
<li>Add type a space than add &quot;raw&quot; (without quotes) press enter</li>
<li>Follow the install instructions, when you get to &quot;Drive C: does not appear to be partitioned&quot; dialog, pick &quot;Yes - Partition drive C:&quot;</li>
<li>On the next screen pick &quot;Yes - Please reboot now&quot;</li>
<li>When at the &quot;Welcome to FreeDOS 1.2&quot; scren hit TAB again</li>
<li>Add the space raw &quot; row&quot; to the command and press enter</li>
<li>Pick &quot;Yes - continue with the installation&quot;</li>
<li>Pick &quot;Yes - Please erase and format drive C:&quot;</li>
<li>At this point its a normal FreeDOS install</li>
<li>When the install is done and reboots choose the &quot;boot from system disc&quot;,you now should have a working FreeDOS on VirtualBox</li>
</ol>

<h2 id="native-oberon-system-3-on-virtual-box">Native Oberon System 3 on Virtual Box</h2>

<p>Native Oberon can be found at <a href="http://www.ethoberon.ethz.ch/native/">http://www.ethoberon.ethz.ch/native/</a>.
There is a related ftp site<sup class="footnote-ref" id="fnref:4"><a href="#fn:4">4</a></sup> where you can download the necessary
files for the stand alone version.</p>

<p>Here's the steps I used in my Mac to download Native Oberon and
into a file on my desktop called &quot;NativeOberon-Standalone&quot;. Open
the macOS Terminal application. I assume you've got a Unix
command called <a href="https://en.wikipedia.org/wiki/Wget">wget</a>
already installed<sup class="footnote-ref" id="fnref:5"><a href="#fn:5">5</a></sup>.</p>

<pre><code class="language-bash">    cd
    mkdir -p Desktop/NativeOberon-Standalone
    cd Desktop/NativeOberon-Standalone
    wget ftp://ftp.ethoberon.ethz.ch/ETHOberon/Native/StdAlone/*.*
</code></pre>

<p>Clone your FreeDOS Box first. You'll want to do a &quot;Full Clone&quot;. You'll
also want to &quot;remove&quot; any optical discs or floppies. You do that from
the virtual boxes' detail page and clicking on the drive and picking the
&quot;Remove disc from virtual drive&quot; in the popup menu.</p>

<p>At this point we have a a virtual machine that is very similar to an
1999 era PC installed with MS DOS.  <a href="http://www.ethoberon.ethz.ch/native/">Native Oberon</a> Normally you'd install Native Oberon
via 1.44MB floppy discs.  In the folder of you downloaded there is
disc image called &quot;oberon0.dsk&quot;.  That can go in our first floppy drive. But how to we get the rest of the files onto a virtual floppies? This wasn't obvious to me at first.</p>

<h2 id="make-the-floppy-disc-images-on-macos">Make the floppy disc images on macOS</h2>

<p>Use can use &quot;Disk Utility&quot; to create floppy disc images on a Mac.
Unlike creating CD images you want to first use the blank image.
From the menu click on File -&gt; New Image -&gt; Blank Image (or use
the shortcut command key and &quot;N&quot;).  You should then see a model
dialog box. This dialog lets you set the name of the image file. You
need to set the size to &quot;1474560 B&quot;. Set format &quot;MS-DOS (FAT)&quot;.
Set encryption of none. Set partition type of
&quot;Single partition - Master Boot Record&quot; and image format set to
&quot;read/write&quot;. Once the disc image is created you can then mount
the empty disc image by clicking on it in finder. Next drag the
appropriate file(s) into the image. Unmount (eject) the image.
At the point you should have a floppy image suitable to mount
from the Virtual Box VM's &quot;floppy drive&quot;.</p>

<h2 id="make-the-floppy-disc-images-on-linux">Make the floppy disc images on Linux</h2>

<p>On Linux I used the mkfs.mkdos with the &quot;-o&quot; option to set the
image name and just created the images from the folders with each
folder holding the appropriate file.</p>

<h2 id="make-the-floppy-disc-images-from-freedos">Make the floppy disc images from FreeDOS</h2>

<p>A third approach I tried that also worked easily was just to use
FreeDOS.  I create an iso image of the Oberon installation
directory and mounted that as a CD under FreeDOS, used Virtual Box
to create the empty floppy and then formatted the floppy old school
style (e.g. &quot;format a:&quot;) and copied the files across.</p>

<p>In either case make sure the formatted images are FAT12 or FAT16.</p>

<p>The Oberon install discs were organized as follows. The
&quot;oberon0.dsk&quot; is initial disc to install a minimal Oberon System.
Once it's installation is complete (described in install.txt
in the Oberon System 3 Stdalone directory) you can then follow
the steps to install the rest of the system, source code
and documentation. The gadgets1.arc contains the install for
Gadgets desktop environment and is an interesting look at how
Oberon took a different path for (similar to RISC OS) for a GUI.</p>
<figure>
<table>
<thead>
<tr>
<th align="left">PACKAGE</th>
<th align="left">FILENAME</th>
<th align="left">SIZE (MB)</th>
<th align="center">DISC No.</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">Oberon-0</td>
<td align="left">oberon0.dsk</td>
<td align="left">1.4</td>
<td align="center">0</td>
</tr>

<tr>
<td align="left">Gadgets</td>
<td align="left">gadgets.arc</td>
<td align="left">1.4  (2.9)</td>
<td align="center">1</td>
</tr>

<tr>
<td align="left">Documentation</td>
<td align="left">docu.arc</td>
<td align="left">1.3  (2.5)</td>
<td align="center">2</td>
</tr>

<tr>
<td align="left">Applications</td>
<td align="left">apps.arc</td>
<td align="left">1.3  (2.8)</td>
<td align="center">3</td>
</tr>

<tr>
<td align="left">Tutorials</td>
<td align="left">tutorial.arc</td>
<td align="left">0.3  (0.8)</td>
<td align="center">4</td>
</tr>

<tr>
<td align="left">Pr3Fonts</td>
<td align="left">pr3fonts.arc</td>
<td align="left">0.3  (0.6)</td>
<td align="center">4</td>
</tr>

<tr>
<td align="left">Pr6Fonts</td>
<td align="left">pr6fonts.arc</td>
<td align="left">0.5  (1.8)</td>
<td align="center">4</td>
</tr>

<tr>
<td align="left">Source1</td>
<td align="left">source1.arc</td>
<td align="left">0.9  (2.5)</td>
<td align="center">5</td>
</tr>

<tr>
<td align="left">Source2</td>
<td align="left">source2.arc</td>
<td align="left">1.2  (3.5)</td>
<td align="center">6</td>
</tr>

<tr>
<td align="left">Source3</td>
<td align="left">source3.arc</td>
<td align="left">0.6  (1.7)</td>
<td align="center">7</td>
</tr>
</tbody>
</table>
<figcaption>sizes are in MB, compressed, then uncompressed
</figcaption>
</figure>
<h1 id="footnote-section">Footnotes</h1>

<div class="footnotes">

<hr>

<ol>
<li id="fn:1">FreeDOS is an Open Source implementation of PC/MS DOC</li>

<li id="fn:2">Native Oberon is a 1990's version of Oberon System running on i386</li>

<li id="fn:3">Download FreeDOS from <a href="http://freedos.org/download">http://freedos.org/download</a></li>

<li id="fn:4">Download Native Oberon Stand Alone from <a href="ftp://ftp.ethoberon.ethz.ch/ETHOberon/Native/StdAlone">ftp://ftp.ethoberon.ethz.ch/ETHOberon/Native/StdAlone</a></li>

<li id="fn:5">wget is easily installed with <a href="https://brew.sh/">HomeBrew</a> or <a href="https://www.macports.org/">Mac Ports</a></li>
</ol>

</div>

      </article>
    </section>

    <footer>
    <p>copyright © 2016 - 2018 R. S. Doiel<br />
<a href="/rssfeed.html">RSS</a> feed and website built with <a href="https://caltechlibrary.github.io/mkpage">mkpage</a>, <a href="https://caltechlibrary.github.io/datatools">datatools</a>, Bash and Make.</p>

    </footer>
<!-- START: PrettyFi from https://github.com/google/code-prettify -->
<script>
/* We want to add the class "prettyprint" to all the pre elements */
var pre_list = document.querySelectorAll("pre");

pre_list.forEach(function(elem) {
    elem.classList.add("prettyprint");
    elem.classList.add("linenums");/**/
    elem.classList.add("json"); /**/
});
</script>
<style>
li.L0, li.L1, li.L2, li.L3, li.L4, li.L5, li.L6, li.L7, li.L8, li.L9
{
    color: #555;
    list-style-type: decimal;
}
</style>
<link rel="stylesheet" type="text/css" href="/css/prettify.css">
<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_
prettify.js"></script>
<!--  END: PrettyFi from https://github.com/google/code-prettify -->

    </body>
</html>
