<!DOCTYPE>
<html lang="en">
    <head>
        <title>digital-clock-2.md</title>
        <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.2.0/pure-min.css">
        <link href="css/styles.css" rel="stylesheet" media="all">
    </head>
    <body>
        <header><h1>digital-clock-2.md</h1></header>
        <section>
        <h2>What Time is it?</h2>
<ul>
<li>Programming Goal<ul>
<li>Create a simple <em>YUI</em> module out of our digital clock</li>
</ul>
</li>
<li>Learning Objectives<ul>
<li>Increase understanding on how to load modules</li>
<li>Illustrate the a simple case of creating a module</li>
<li>Explore loading a module based on configuration</li>
</ul>
</li>
</ul>
<p>Let us turn our &quot;digital clock&quot; into a module. The idea is to create 
an Object attached to your <em>Y</em> called <em>DigitalClock</em> you could then add
that to a <em>DOM</em> element.  An optional callback function to supported
extending the module with a custom render function (e.g. an analog clock
using Canvas).</p>
<h3>Steps</h3>
<p>Create a new file called <em>digital-clock-2.js</em>. We will put our module code there.
Copy <em>seed-file.html</em> to <em>digital-clock-2.html</em>. Do the following things</p>
<ol>
<li>In <em>digital-clock-2.html&#39;s _script</em> in-line element add configuration to point our our module.</li>
<li>In <em>digital-clock-2.html&#39;s _script</em> in-line element update the <em>use()</em> function to include our module.</li>
<li>Open our empty <em>digital-clock-2.js</em> file and create our module
 a. create a namespace
 b. create a <em>render()</em> method that returns HTML markup as a string with current time<pre><code> - this should expect a _Date_ object as a parameter to be rendered.</code></pre>
 c. create a <em>run()</em> method that uses setInterval to update our clock every second. <pre><code> - first paramter is a CSS selector of an element which will hold our clock
 - second parameter should be the number of milliseconds between updates
 - an optional third parameter should allow for a custom render method overriding our default render method</code></pre>
 d. Include a requirement for our module of <em>node</em> so we can update the <em>DOM</em> elements targetted.</li>
<li>Go back to our <em>digital-clock-2.html</em> file.</li>
<li>Inside the <em>Y</em> on our in-line <em>script</em> element use <em>Y.DigitalClock()</em> to create our <em>clock</em> object and _run() to run it.</li>
</ol>
<h3>Solution</h3>
<p>Here is the markup for our main HTML page. Note the use of a configuration in <em>YUI()</em>.</p>
<p><a href="solution-digital-clock-2.html">solution-digital-clock-2.html</a></p>
<pre><code class="language-HTML">    &lt;!DOCTYPE html&gt;
    &lt;html&gt;
        &lt;head&gt;
            &lt;title&gt;Digital Clock 2&lt;/title&gt;
            &lt;style&gt;&lt;/style&gt;
        &lt;/head&gt;
        &lt;body&gt;
            &lt;header&gt;Digital Clock 2&lt;/header&gt;
            &lt;section id=&quot;clock&quot;&gt;Main content goes here&lt;/section&gt;
            &lt;footer&gt;The section above should display the date and time. It should change every second.&lt;/footer&gt;
            &lt;!-- get YUI3 on the page, and a script block for your code --&gt;
            &lt;script src=&quot;http://yui.yahooapis.com/3.10.0/build/yui/yui-min.js&quot;&gt;&lt;/script&gt;
            &lt;script&gt;
            // WE configure our _YUI()_ this time.
            YUI({
                modules: {
                    &quot;digital-clock&quot;: {
                        fullpath: &quot;digital-clock-2.js&quot;
                    }
                }
            }).use(&quot;node&quot;, &quot;digital-clock&quot;, function (Y) {
                // Your code goes here
                var clock = new Y.DigitalClock();
                clock.run(&quot;#clock&quot;, 1000);
            });
            &lt;/script&gt;
        &lt;/body&gt;
    &lt;/html&gt;</code></pre>
<p>That is the easy part. Now let us create our module. After we define
our modules core we then include a version number (e.g. 0.0.2 since this is our second
digital clock prototype) and
a configuration options object including the required list of modules
we need to run.</p>
<p><a href="digital-clock-2.js">digital-clock-2.js</a></p>
<pre><code class="language-JavaScript">    // Define out module using _YUI.add()_
    YUI.add(&quot;digital-clock&quot;, function (Y) {
        // Create our namespace
        Y.namespace(&quot;DigitalClock&quot;);

        // Setup a constructor with reasonable defaults
        function DigitalClock () {};
        DigitalClock.prototype.interval = 1000;
        DigitalClock.prototype.int_id = null;
        DigitalClock.prototype.selector = null;
        DigitalClock.prototype.render = function (now) {
            this.element.set(&quot;text&quot;, now.toString());
        };
        DigitalClock.prototype.run = function (selector, interval, renderCallback) {
            var self = this;

            this.element = Y.one(selector);
            if (typeof renderCallback !== &quot;undefined&quot;) {
                this.render = render;
            }
            this.int_id = setInterval(function () {
                self.render(new Date());                
            }, interval);
            return this.int_id;
        };
        DigitalClock.prototype.stop = function () {
            if (this.int_id) {
                clearInterval(this.int_id);
            }
        };

        // Add our new Object as DigitalClock
        Y.DigitalClock = DigitalClock;
    },
    // Semantic Version number
    &quot;0.0.2&quot;,
    // Configuration with list of modules we &#39;require&#39; 
    {requires: [&quot;node&quot;]});</code></pre>

        </section>
        
        <footer>
            <div class="copyright-notice">copyright &copy; 2013</div>
            <div class="license">Released under the <a href="http://opensource.org/licenses/BSD-2-Clause">BSD 2-Clause</a> license.</div>
        </footer>
        <script src="http://yui.yahooapis.com/3.10.0/build/yui/yui-min.js"></script>
        <script>
        YUI().use("node", function (Y) {
            var allH2 = Y.all("h2");
            allH2.each(function (h2) {
                var key = h2.getHTML(),
                    anchor = Y.one('a[href="#' + key.toLowerCase() + '"]');
                if (anchor) {
                    h2.setHTML('<a name="' + key.toLowerCase() + '">' + key + '</a>');
                }
            });
        });
        </script>
    </body>
</html>
